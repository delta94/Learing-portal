{"ast":null,"code":"import _toConsumableArray from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,Suspense,lazy,useState}from\"react\";import{Grid,Divider,Container,CircularProgress,Button}from\"@material-ui/core\";import queryString from\"query-string\";import categoryFormat from\"utils/categoryFormat\";import{useLocation}from\"react-router-dom\";import{useDispatch,useSelector}from'react-redux';import*as actions from\"../../actions\";import{makeStyles}from\"@material-ui/core/styles\";var Header=lazy(function(){return import('../../share/Header');});var SelectCategory=lazy(function(){return import('../../share/SelectCategory');});var CourseDetail=lazy(function(){return import('./CourseDetails');});var useStyles=makeStyles(function(theme){return{content:{paddingRight:\"8vw\",paddingLeft:\"8vw\"},divider:{marginBottom:20},circular:{marginTop:20},button:{background:theme.palette.primary.main,borderRadius:40,padding:'15px 30px 15px 30px',margin:10}};});export default function GroupCourse(){var _useLocation=useLocation(),search=_useLocation.search;var _queryString$parse=queryString.parse(search),category=_queryString$parse.category;var dispatch=useDispatch();var parsed=queryString.parse(search);var _useSelector=useSelector(function(state){return state.course;}),courseCategories=_useSelector.courseCategories,isLoadingCourseCategories=_useSelector.isLoadingCourseCategories;var classes=useStyles();var postsPerPage=8;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postsToShow=_useState2[0],setPostsToShow=_useState2[1];var _useState3=useState(8),_useState4=_slicedToArray(_useState3,2),next=_useState4[0],setNext=_useState4[1];var loopWithSlice=function loopWithSlice(start,end){var slicedPosts=courseCategories.slice(start,end);setPostsToShow([].concat(_toConsumableArray(postsToShow),_toConsumableArray(slicedPosts)));};useEffect(function(){loopWithSlice(0,postsPerPage);// eslint-disable-next-line\n},[isLoadingCourseCategories]);var handleShowMorePosts=function handleShowMorePosts(){loopWithSlice(next,next+postsPerPage);setNext(next+postsPerPage);};var renderLoader=function renderLoader(){return/*#__PURE__*/React.createElement(\"div\",null);};useEffect(function(){setPostsToShow([]);var action=actions.loadCourseCategories(parsed.category===undefined?1:parsed.category);dispatch(action);// eslint-disable-next-line\n},[parsed.category]);return/*#__PURE__*/React.createElement(Suspense,{fallback:renderLoader()},/*#__PURE__*/React.createElement(Header,{text:\"รายวิชา\"}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.content,direction:\"row\",alignItems:\"center\",justify:\"space-between\"},/*#__PURE__*/React.createElement(\"h2\",null,categoryFormat(category)),/*#__PURE__*/React.createElement(SelectCategory,null))),/*#__PURE__*/React.createElement(Divider,{style:{marginBottom:20}}),/*#__PURE__*/React.createElement(Container,{maxWidth:\"lg\"},/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",alignItems:\"center\",justify:isLoadingCourseCategories?\"center\":\"flex-start\",spacing:3},isLoadingCourseCategories&&/*#__PURE__*/React.createElement(CircularProgress,{color:\"secondary\",className:classes.circular}),postsToShow.map(function(item,index){return/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:4,lg:3,xl:3},/*#__PURE__*/React.createElement(CourseDetail,{key:index,id:item.id,learningTopic:item.learningTopic,learningObjective:item.learningObjective,courseCategoryId:item.courseCategoryId,thumbnail:item.thumbnail,viewCount:item.viewCount,assessment:item.assessment,targetGroup:item.targetGroup,point:item.satisfactionSum/item.satisfactionCount,satisfactionCount:item.satisfactionCount,link:item.link,code:item.code,name:item.name,platformId:item.platformId}));})),!isLoadingCourseCategories&&next<courseCategories.length&&/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",alignItems:\"center\",justify:\"center\",spacing:3},/*#__PURE__*/React.createElement(Button,{onClick:handleShowMorePosts,color:\"secondary\",className:classes.button},\"\\u0E14\\u0E39\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\")))));}","map":{"version":3,"sources":["/Users/ninew/Documents/GitHub/Learing-portal/src/modules/coursePortal/components/Course/GroupCourse.tsx"],"names":["React","useEffect","Suspense","lazy","useState","Grid","Divider","Container","CircularProgress","Button","queryString","categoryFormat","useLocation","useDispatch","useSelector","actions","makeStyles","Header","SelectCategory","CourseDetail","useStyles","theme","content","paddingRight","paddingLeft","divider","marginBottom","circular","marginTop","button","background","palette","primary","main","borderRadius","padding","margin","GroupCourse","search","parse","category","dispatch","parsed","state","course","courseCategories","isLoadingCourseCategories","classes","postsPerPage","postsToShow","setPostsToShow","next","setNext","loopWithSlice","start","end","slicedPosts","slice","handleShowMorePosts","renderLoader","action","loadCourseCategories","undefined","map","item","index","id","learningTopic","learningObjective","courseCategoryId","thumbnail","viewCount","assessment","targetGroup","satisfactionSum","satisfactionCount","link","code","name","platformId","length"],"mappings":"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","sourcesContent":["import React, { useEffect, Suspense, lazy, useState } from \"react\";\nimport { Grid, Divider, Container, CircularProgress, Button } from \"@material-ui/core\";\nimport queryString from \"query-string\";\nimport categoryFormat from \"utils/categoryFormat\"\nimport { useLocation } from \"react-router-dom\";\n\nimport { useDispatch, useSelector } from 'react-redux'\nimport * as actions from \"../../actions\"\nimport { makeStyles } from \"@material-ui/core/styles\";\n\n\n\nconst Header = lazy(() => import('../../share/Header'));\nconst SelectCategory = lazy(() => import('../../share/SelectCategory'));\nconst CourseDetail = lazy(() => import('./CourseDetails'));\n\nconst useStyles = makeStyles((theme) => ({\n  content: {\n    paddingRight: \"8vw\",\n    paddingLeft: \"8vw\",\n  },\n  divider: {\n    marginBottom: 20\n  },\n  circular: {\n    marginTop: 20\n  }, button: {\n    background: theme.palette.primary.main,\n    borderRadius: 40,\n    padding: '15px 30px 15px 30px',\n    margin: 10\n  }\n\n}));\n\n\nexport default function GroupCourse() {\n  const { search } = useLocation();\n  const { category } = queryString.parse(search);\n  const dispatch = useDispatch();\n  const parsed = queryString.parse(search)\n  const { courseCategories, isLoadingCourseCategories } = useSelector((state: any) => state.course);\n  const classes = useStyles()\n  const postsPerPage = 8;\n  const [postsToShow, setPostsToShow] = useState<any>([]);\n  const [next, setNext] = useState(8);\n  const loopWithSlice = (start: any, end: any) => {\n    const slicedPosts = courseCategories.slice(start, end);\n    setPostsToShow([...postsToShow, ...slicedPosts]);\n  };\n\n  useEffect(() => {\n    loopWithSlice(0, postsPerPage);\n    // eslint-disable-next-line\n  }, [isLoadingCourseCategories]);\n\n  const handleShowMorePosts = () => {\n    loopWithSlice(next, next + postsPerPage);\n    setNext(next + postsPerPage);\n  }\n\n  const renderLoader = () =>\n    <div></div>\n\n  useEffect(() => {\n    setPostsToShow([])\n    const action = actions.loadCourseCategories(parsed.category === undefined ? 1 : parsed.category)\n    dispatch(action)\n\n\n    // eslint-disable-next-line\n  }, [parsed.category])\n\n  return (\n    <Suspense fallback={renderLoader()}>\n      <Header text={\"รายวิชา\"} />\n      <div>\n        <Grid container direction=\"row\" alignItems=\"center\">\n\n          <Grid container className={classes.content} direction=\"row\" alignItems=\"center\" justify={\"space-between\"} >\n\n            <h2>{categoryFormat(category)}</h2>\n            <SelectCategory />\n\n          </Grid>\n        </Grid>\n        <Divider style={{ marginBottom: 20 }} />\n\n        <Container maxWidth=\"lg\">\n          <Grid\n            container\n            direction=\"row\"\n            alignItems=\"center\"\n            justify={isLoadingCourseCategories ? \"center\" : \"flex-start\"}\n            spacing={3}\n          >\n            {isLoadingCourseCategories && <CircularProgress color=\"secondary\" className={classes.circular} />}\n\n            {postsToShow.map((item: any, index: number) => (\n              <Grid item xs={12} sm={6} md={4} lg={3} xl={3}>\n                <CourseDetail\n                  key={index}\n                  id={item.id}\n                  learningTopic={item.learningTopic}\n                  learningObjective={item.learningObjective}\n                  courseCategoryId={item.courseCategoryId}\n                  thumbnail={item.thumbnail}\n                  viewCount={item.viewCount}\n                  assessment={item.assessment}\n                  targetGroup={item.targetGroup}\n                  point={(item.satisfactionSum) / item.satisfactionCount}\n                  satisfactionCount={item.satisfactionCount}\n                  link={item.link}\n                  code={item.code}\n                  name={item.name}\n                  platformId={item.platformId}\n                />\n              </Grid>\n            ))}\n          </Grid>\n          {!isLoadingCourseCategories && next < courseCategories.length &&\n            <Grid\n              container\n              direction=\"row\"\n              alignItems=\"center\"\n              justify={\"center\"}\n              spacing={3}\n            >\n\n              <Button onClick={handleShowMorePosts} color=\"secondary\" className={classes.button}>ดูเพิ่มเติม</Button>\n            </Grid>}\n        </Container>\n      </div>\n    </Suspense>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}
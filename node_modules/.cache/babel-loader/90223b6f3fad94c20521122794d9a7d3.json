{"ast":null,"code":"import _toConsumableArray from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,Suspense,lazy,useState}from\"react\";import{Grid,Divider,Container,CircularProgress,Button}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import{useLocation}from\"react-router-dom\";import{parse}from\"query-string\";import{useDispatch,useSelector}from'react-redux';import*as actions from\"../../actions\";import searchNotfound from\"assets/gif/somethingbroken.gif\";import Search from\"../Search\";var CourseDetail=lazy(function(){return import('../Course/CourseDetails');});var Header=lazy(function(){return import('../../share/Header');});var SelectCategory=lazy(function(){return import('../../share/SelectCategory');});var useStyles=makeStyles(function(theme){return{root:{paddingTop:\"20px\"},content:{paddingRight:\"8vw\",paddingLeft:\"8vw\"},divider:{marginBottom:20},circular:{marginTop:20},button:{background:theme.palette.primary.main,borderRadius:40,padding:'15px 30px 15px 30px',margin:10}};});export default function GroupCourse(props){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.course;}),course=_useSelector.course,isLoadingCourse=_useSelector.isLoadingCourse;var classes=useStyles();var _useLocation=useLocation(),search=_useLocation.search;var _parse=parse(search),q=_parse.q;var postsPerPage=8;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postsToShow=_useState2[0],setPostsToShow=_useState2[1];var _useState3=useState(8),_useState4=_slicedToArray(_useState3,2),next=_useState4[0],setNext=_useState4[1];var loopWithSlice=function loopWithSlice(start,end){var slicedPosts=course.slice(start,end);setPostsToShow([].concat(_toConsumableArray(postsToShow),_toConsumableArray(slicedPosts)));};useEffect(function(){loopWithSlice(0,postsPerPage);// eslint-disable-next-line\n},[isLoadingCourse]);var handleShowMorePosts=function handleShowMorePosts(){loopWithSlice(next,next+postsPerPage);setNext(next+postsPerPage);};useEffect(function(){setPostsToShow([]);var action=actions.loadCourse(q);dispatch(action);// eslint-disable-next-line\n},[q]);var renderLoader=function renderLoader(){return/*#__PURE__*/React.createElement(\"div\",null);};return/*#__PURE__*/React.createElement(Suspense,{fallback:renderLoader()},/*#__PURE__*/React.createElement(Header,{text:\"ค้นหารายวิชา\"}),/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Search,null),/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.content,direction:\"row\",alignItems:\"center\",justify:\"space-between\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32 \",q),/*#__PURE__*/React.createElement(SelectCategory,null)),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(Container,{maxWidth:\"lg\"},/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",alignItems:\"center\",justify:isLoadingCourse?\"center\":\"flex-start\",spacing:3},isLoadingCourse&&/*#__PURE__*/React.createElement(CircularProgress,{color:\"secondary\",className:classes.circular}),course.length===0&&!isLoadingCourse&&/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",alignItems:\"center\",justify:\"center\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u0E02\\u0E2D\\u0E2D\\u0E20\\u0E31\\u0E22\\u0E04\\u0E48\\u0E30 \\u0E2B\\u0E32\\u0E23\\u0E32\\u0E22\\u0E27\\u0E34\\u0E0A\\u0E32\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A \",q),/*#__PURE__*/React.createElement(\"img\",{src:searchNotfound,alt:\"\",width:\"400px\",height:\"400px\"})),postsToShow.map(function(item,index){return/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:4,lg:3,xl:3},/*#__PURE__*/React.createElement(CourseDetail,{key:index,id:item.id,learningTopic:item.learningTopic,learningObjective:item.learningObjective,courseCategoryId:item.courseCategoryId,thumbnail:item.thumbnail,viewCount:item.viewCount,assessment:item.assessment,targetGroup:item.targetGroup,point:item.satisfactionSum/item.satisfactionCount,satisfactionCount:item.satisfactionCount,link:item.link,code:item.code,name:item.name,platformId:item.platformId}));})),!isLoadingCourse&&next<course.length&&/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",alignItems:\"center\",justify:\"center\",spacing:3},/*#__PURE__*/React.createElement(Button,{onClick:handleShowMorePosts,color:\"secondary\",className:classes.button},\"\\u0E14\\u0E39\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\")))));}","map":{"version":3,"sources":["/Users/ninew/Documents/GitHub/Learing-portal/src/modules/coursePortal/components/Search/index.tsx"],"names":["React","useEffect","Suspense","lazy","useState","Grid","Divider","Container","CircularProgress","Button","makeStyles","useLocation","parse","useDispatch","useSelector","actions","searchNotfound","Search","CourseDetail","Header","SelectCategory","useStyles","theme","root","paddingTop","content","paddingRight","paddingLeft","divider","marginBottom","circular","marginTop","button","background","palette","primary","main","borderRadius","padding","margin","GroupCourse","props","dispatch","state","course","isLoadingCourse","classes","search","q","postsPerPage","postsToShow","setPostsToShow","next","setNext","loopWithSlice","start","end","slicedPosts","slice","handleShowMorePosts","action","loadCourse","renderLoader","length","map","item","index","id","learningTopic","learningObjective","courseCategoryId","thumbnail","viewCount","assessment","targetGroup","satisfactionSum","satisfactionCount","link","code","name","platformId"],"mappings":"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","sourcesContent":["import React, { useEffect, Suspense, lazy, useState } from \"react\";\nimport { Grid, Divider, Container, CircularProgress, Button } from \"@material-ui/core\";\n\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { useLocation } from \"react-router-dom\"\nimport { parse } from \"query-string\"\nimport { useDispatch, useSelector } from 'react-redux'\nimport * as actions from \"../../actions\"\nimport searchNotfound from \"assets/gif/somethingbroken.gif\"\nimport Search from \"../Search\"\nconst CourseDetail = lazy(() => import('../Course/CourseDetails'));\nconst Header = lazy(() => import('../../share/Header'));\nconst SelectCategory = lazy(() => import('../../share/SelectCategory'));\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        paddingTop: \"20px\"\n    },\n    content: {\n        paddingRight: \"8vw\",\n        paddingLeft: \"8vw\",\n    },\n    divider: {\n        marginBottom: 20\n    },\n    circular: {\n        marginTop: 20\n    }, button: {\n        background: theme.palette.primary.main,\n        borderRadius: 40,\n        padding: '15px 30px 15px 30px',\n        margin: 10\n    }\n\n}));\nexport default function GroupCourse(props: any) {\n    const dispatch = useDispatch();\n    const { course, isLoadingCourse } = useSelector((state: any) => state.course);\n    const classes = useStyles()\n    const { search } = useLocation()\n    const { q } = parse(search)\n    const postsPerPage = 8;\n    const [postsToShow, setPostsToShow] = useState<any>([]);\n    const [next, setNext] = useState(8);\n    const loopWithSlice = (start: any, end: any) => {\n        const slicedPosts = course.slice(start, end);\n        setPostsToShow([...postsToShow, ...slicedPosts]);\n    };\n\n    useEffect(() => {\n        loopWithSlice(0, postsPerPage);\n        // eslint-disable-next-line\n    }, [isLoadingCourse]);\n\n    const handleShowMorePosts = () => {\n        loopWithSlice(next, next + postsPerPage);\n        setNext(next + postsPerPage);\n    }\n    useEffect(() => {\n        setPostsToShow([])\n        const action = actions.loadCourse(q)\n        dispatch(action)\n        // eslint-disable-next-line\n    }, [q])\n\n\n\n    const renderLoader = () =>\n        <div></div>\n\n    return (\n        <Suspense fallback={renderLoader()}>\n            <Header text={\"ค้นหารายวิชา\"} />\n\n\n            <div className={classes.root}>\n\n                <Search />\n\n                <Grid container className={classes.content} direction=\"row\" alignItems=\"center\" justify={\"space-between\"} >\n\n                    <h2>ค้นหา {q}</h2>\n                    <SelectCategory />\n\n                </Grid>\n                <Divider className={classes.divider} />\n\n                <Container maxWidth=\"lg\">\n                    <Grid\n                        container\n                        direction=\"row\"\n                        alignItems=\"center\"\n                        justify={isLoadingCourse ? \"center\" : \"flex-start\"}\n                        spacing={3}\n                    >\n\n                        {isLoadingCourse && <CircularProgress color=\"secondary\" className={classes.circular} />}\n                        {course.length === 0 && !isLoadingCourse &&\n\n                            <Grid\n                                container\n                                direction=\"row\"\n                                alignItems=\"center\"\n                                justify={\"center\"}\n                            >\n                                <h2>ขออภัยค่ะ หารายวิชาไม่พบ {q}</h2>\n                                <img src={searchNotfound} alt=\"\" width=\"400px\" height=\"400px\" />\n\n                            </Grid>\n                        }\n                        {postsToShow.map((item: any, index: number) => (\n                            <Grid item xs={12} sm={6} md={4} lg={3} xl={3}>\n                                <CourseDetail\n                                    key={index}\n                                    id={item.id}\n                                    learningTopic={item.learningTopic}\n                                    learningObjective={item.learningObjective}\n                                    courseCategoryId={item.courseCategoryId}\n                                    thumbnail={item.thumbnail}\n                                    viewCount={item.viewCount}\n                                    assessment={item.assessment}\n                                    targetGroup={item.targetGroup}\n                                    point={(item.satisfactionSum) / item.satisfactionCount}\n                                    satisfactionCount={item.satisfactionCount}\n                                    link={item.link}\n                                    code={item.code}\n                                    name={item.name}\n                                    platformId={item.platformId}\n                                />\n                            </Grid>\n                        ))\n                        }\n                    </Grid>\n                    {!isLoadingCourse && next < course.length &&\n                        <Grid\n                            container\n                            direction=\"row\"\n                            alignItems=\"center\"\n                            justify={\"center\"}\n                            spacing={3}\n                        >\n\n                            <Button onClick={handleShowMorePosts} color=\"secondary\" className={classes.button}>ดูเพิ่มเติม</Button>\n                        </Grid>}\n                </Container>\n            </div>\n\n        </Suspense>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}
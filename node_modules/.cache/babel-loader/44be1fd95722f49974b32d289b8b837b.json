{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{getCookie}from'cookie/cookie';import*as infoactions from\"modules/infomation/actions\";var LOAD_EDIT_REQUEST=\"learning-portal/src/ui/LOAD_EDIT_REQUEST\";var LOAD_EDIT_SUCCESS=\"learning-portal/src/ui/LOAD_EDIT_SUCCESS\";var LOAD_EDIT_FAILURE=\"learning-portal/src/ui/LOAD_EDIT_FAILURE\";var LOAD_PROFILE_REQUEST=\"learning-portal/src/ui/LOAD_PROFILE_REQUEST\";var LOAD_PROFILE_SUCCESS=\"learning-portal/src/ui/LOAD_PROFILE_SUCCESS\";var LOAD_PROFILE_FAILURE=\"learning-portal/src/ui/LOAD_EDIT_FAILURE\";function loadGetProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var id,token,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:LOAD_PROFILE_REQUEST});_context.prev=1;id=getCookie('id');token=getCookie('token');_context.next=6;return axios.get(\"/Users/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});case 6:data=_context.sent;dispatch({type:LOAD_PROFILE_SUCCESS,payload:{message:\"ท่านสมัครเรียบร้อยเเล้ว\",data:data.data,status:data.status}});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch({type:LOAD_PROFILE_FAILURE,payload:{message:\"เกิดข้อผิดพลาด\",staus:_context.t0}});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();}function loadEdit(updateInfo){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var id,token,data,action,_action;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:LOAD_EDIT_REQUEST});_context2.prev=1;id=getCookie('id');token=getCookie('token');_context2.next=6;return axios.put(\"/Users/\".concat(id),updateInfo,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 6:data=_context2.sent;action=infoactions.loadMessage(\"แก้ไขข้อมูลเรียบร้อยเเล้ว\",\"success\");dispatch(action);dispatch({type:LOAD_EDIT_SUCCESS,payload:{message:\"ท่านสมัครเรียบร้อยเเล้ว\",edit:data.data,status:data.status}});_context2.next=17;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](1);dispatch({type:LOAD_EDIT_FAILURE,payload:{message:\"เกิดข้อผิดพลาด\",staus:_context2.t0.response.status}});_action=infoactions.loadMessage(\"เกิดข้อผิดพลาดในการแก้ไขข้อมูล\",\"error\");dispatch(_action);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[1,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}export{LOAD_EDIT_REQUEST,LOAD_EDIT_SUCCESS,LOAD_EDIT_FAILURE,LOAD_PROFILE_REQUEST,LOAD_PROFILE_SUCCESS,LOAD_PROFILE_FAILURE,loadEdit,loadGetProfile};","map":{"version":3,"sources":["/Users/ninew/Documents/GitHub/Learing-portal/src/modules/editProfile/actions.tsx"],"names":["axios","getCookie","infoactions","LOAD_EDIT_REQUEST","LOAD_EDIT_SUCCESS","LOAD_EDIT_FAILURE","LOAD_PROFILE_REQUEST","LOAD_PROFILE_SUCCESS","LOAD_PROFILE_FAILURE","loadGetProfile","dispatch","type","id","token","get","headers","Authorization","data","payload","message","status","staus","loadEdit","updateInfo","put","action","loadMessage","edit","response"],"mappings":"mUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,eAA1B,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,4BAA7B,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,0CAA1B,CACA,GAAMC,CAAAA,iBAAiB,CAAG,0CAA1B,CACA,GAAMC,CAAAA,iBAAiB,CAAG,0CAA1B,CACA,GAAMC,CAAAA,oBAAoB,CAAG,6CAA7B,CACA,GAAMC,CAAAA,oBAAoB,CAAG,6CAA7B,CACA,GAAMC,CAAAA,oBAAoB,CAAG,0CAA7B,CACA,QAASC,CAAAA,cAAT,EAA0B,CACtB,+FAAO,iBAAOC,QAAP,oIACHA,QAAQ,CAAC,CAAEC,IAAI,CAAEL,oBAAR,CAAD,CAAR,CADG,gBAGOM,EAHP,CAGYX,SAAS,CAAC,IAAD,CAHrB,CAIOY,KAJP,CAIeZ,SAAS,CAAC,OAAD,CAJxB,uBAKoBD,CAAAA,KAAK,CAACc,GAAN,kBAAoBF,EAApB,EAA0B,CACzCG,OAAO,CAAE,CACLC,aAAa,kBAAYH,KAAZ,CADR,CADgC,CAA1B,CALpB,QAKOI,IALP,eAWCP,QAAQ,CAAC,CACLC,IAAI,CAAEJ,oBADD,CAELW,OAAO,CAAE,CACLC,OAAO,CAAE,yBADJ,CAELF,IAAI,CAAEA,IAAI,CAACA,IAFN,CAGLG,MAAM,CAAEH,IAAI,CAACG,MAHR,CAFJ,CAAD,CAAR,CAXD,iFAqBCV,QAAQ,CAAC,CACLC,IAAI,CAAEH,oBADD,CAELU,OAAO,CAAE,CACLC,OAAO,CAAE,gBADJ,CAELE,KAAK,YAFA,CAFJ,CAAD,CAAR,CArBD,qEAAP,+DA8BH,CAED,QAASC,CAAAA,QAAT,CAAkBC,UAAlB,CAAmC,CAC/B,gGAAO,kBAAOb,QAAP,uJACHA,QAAQ,CAAC,CAAEC,IAAI,CAAER,iBAAR,CAAD,CAAR,CADG,iBAGOS,EAHP,CAGYX,SAAS,CAAC,IAAD,CAHrB,CAIOY,KAJP,CAIeZ,SAAS,CAAC,OAAD,CAJxB,wBAKoBD,CAAAA,KAAK,CAACwB,GAAN,kBAAoBZ,EAApB,EAA0BW,UAA1B,CAAsC,CACrDR,OAAO,CAAE,CACL,eAAgB,kBADX,CAELC,aAAa,kBAAYH,KAAZ,CAFR,CAD4C,CAAtC,CALpB,QAKOI,IALP,gBAWOQ,MAXP,CAWgBvB,WAAW,CAACwB,WAAZ,CAAwB,2BAAxB,CAAqD,SAArD,CAXhB,CAYChB,QAAQ,CAACe,MAAD,CAAR,CACAf,QAAQ,CAAC,CACLC,IAAI,CAAEP,iBADD,CAELc,OAAO,CAAE,CACLC,OAAO,CAAE,yBADJ,CAELQ,IAAI,CAAEV,IAAI,CAACA,IAFN,CAGLG,MAAM,CAAEH,IAAI,CAACG,MAHR,CAFJ,CAAD,CAAR,CAbD,qFAsBCV,QAAQ,CAAC,CACLC,IAAI,CAAEN,iBADD,CAELa,OAAO,CAAE,CACLC,OAAO,CAAE,gBADJ,CAELE,KAAK,CAAE,aAAIO,QAAJ,CAAaR,MAFf,CAFJ,CAAD,CAAR,CAOMK,OA7BP,CA6BgBvB,WAAW,CAACwB,WAAZ,CAAwB,gCAAxB,CAA0D,OAA1D,CA7BhB,CA8BChB,QAAQ,CAACe,OAAD,CAAR,CA9BD,uEAAP,iEAiCH,CAED,OACItB,iBADJ,CAEIC,iBAFJ,CAGIC,iBAHJ,CAIIC,oBAJJ,CAKIC,oBALJ,CAMIC,oBANJ,CAOIc,QAPJ,CAQIb,cARJ","sourcesContent":["import axios from \"axios\";\nimport { getCookie } from 'cookie/cookie'\nimport * as infoactions from \"modules/infomation/actions\"\n\nconst LOAD_EDIT_REQUEST = \"learning-portal/src/ui/LOAD_EDIT_REQUEST\";\nconst LOAD_EDIT_SUCCESS = \"learning-portal/src/ui/LOAD_EDIT_SUCCESS\";\nconst LOAD_EDIT_FAILURE = \"learning-portal/src/ui/LOAD_EDIT_FAILURE\";\nconst LOAD_PROFILE_REQUEST = \"learning-portal/src/ui/LOAD_PROFILE_REQUEST\";\nconst LOAD_PROFILE_SUCCESS = \"learning-portal/src/ui/LOAD_PROFILE_SUCCESS\";\nconst LOAD_PROFILE_FAILURE = \"learning-portal/src/ui/LOAD_EDIT_FAILURE\";\nfunction loadGetProfile() {\n    return async (dispatch: any) => {\n        dispatch({ type: LOAD_PROFILE_REQUEST });\n        try {\n            const id = getCookie('id')\n            const token = getCookie('token')\n            const data = await axios.get(`/Users/${id}`, {\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n\n            dispatch({\n                type: LOAD_PROFILE_SUCCESS,\n                payload: {\n                    message: \"ท่านสมัครเรียบร้อยเเล้ว\",\n                    data: data.data,\n                    status: data.status\n                },\n            });\n        } catch (err) {\n\n            dispatch({\n                type: LOAD_PROFILE_FAILURE,\n                payload: {\n                    message: \"เกิดข้อผิดพลาด\",\n                    staus: err\n                },\n            });\n        }\n    };\n}\n\nfunction loadEdit(updateInfo: any) {\n    return async (dispatch: any) => {\n        dispatch({ type: LOAD_EDIT_REQUEST });\n        try {\n            const id = getCookie('id')\n            const token = getCookie('token')\n            const data = await axios.put(`/Users/${id}`, updateInfo, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            const action = infoactions.loadMessage(\"แก้ไขข้อมูลเรียบร้อยเเล้ว\", \"success\")\n            dispatch(action)\n            dispatch({\n                type: LOAD_EDIT_SUCCESS,\n                payload: {\n                    message: \"ท่านสมัครเรียบร้อยเเล้ว\",\n                    edit: data.data,\n                    status: data.status\n                },\n            });\n        } catch (err) {\n            dispatch({\n                type: LOAD_EDIT_FAILURE,\n                payload: {\n                    message: \"เกิดข้อผิดพลาด\",\n                    staus: err.response.status\n                },\n            });\n            const action = infoactions.loadMessage(\"เกิดข้อผิดพลาดในการแก้ไขข้อมูล\", \"error\")\n            dispatch(action)\n        }\n    };\n}\n\nexport {\n    LOAD_EDIT_REQUEST,\n    LOAD_EDIT_SUCCESS,\n    LOAD_EDIT_FAILURE,\n    LOAD_PROFILE_REQUEST,\n    LOAD_PROFILE_SUCCESS,\n    LOAD_PROFILE_FAILURE,\n    loadEdit,\n    loadGetProfile\n};\n"]},"metadata":{},"sourceType":"module"}
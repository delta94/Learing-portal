{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{getCookie}from'cookie/cookie';import*as infoactions from\"modules/infomation/actions\";var LOAD_PUT_REQUEST=\"learning-portal/src/ui/LOAD_PUT_REQUEST\";var LOAD_PUT_SUCCESS=\"learning-portal/src/ui/LOAD_PUT_SUCCESS\";var LOAD_PUT_FAILURE=\"learning-portal/src/ui/LOAD_PUT_REQUEST\";function loadPUT(updateInfo){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var id,token,data,action,_action,_action2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:LOAD_PUT_REQUEST});_context.prev=1;id=getCookie('id');token=getCookie('token');_context.next=6;return axios.put(\"/Users/\".concat(id,\"/Password\"),updateInfo,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 6:data=_context.sent;dispatch({type:LOAD_PUT_SUCCESS,payload:{message:\"แก้ไขรหัสผ่านเรียบร้อยเเล้ว\",data:data.data,status:data.status}});action=infoactions.loadMessage(\"แก้ไขรหัสผ่านเรียบร้อยเเล้ว\",\"success\");dispatch(action);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch({type:LOAD_PUT_FAILURE,payload:{message:\"เกิดข้อผิดพลาด\",staus:_context.t0.response.status}});if(_context.t0.response.status===401){_action=infoactions.loadMessage(\"รหัสผ่านเดิมไม่ถูกต้อง\",\"error\");dispatch(_action);}else{_action2=infoactions.loadMessage(\"\\u0E40\\u0E01\\u0E34\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E1C\\u0E34\\u0E14\\u0E1E\\u0E25\\u0E32\\u0E14\\u0E43\\u0E19\\u0E01\\u0E32\\u0E23\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19 \".concat(_context.t0.response.status),\"error\");dispatch(_action2);}case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export{LOAD_PUT_REQUEST,LOAD_PUT_SUCCESS,LOAD_PUT_FAILURE,loadPUT};","map":{"version":3,"sources":["/Users/ninew/Documents/GitHub/Learing-portal/src/modules/resetPortal/actions.tsx"],"names":["axios","getCookie","infoactions","LOAD_PUT_REQUEST","LOAD_PUT_SUCCESS","LOAD_PUT_FAILURE","loadPUT","updateInfo","dispatch","type","id","token","put","headers","Authorization","data","payload","message","status","action","loadMessage","staus","response"],"mappings":"mUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,eAA1B,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,4BAA7B,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,yCAAzB,CACA,GAAMC,CAAAA,gBAAgB,CAAG,yCAAzB,CACA,GAAMC,CAAAA,gBAAgB,CAAG,yCAAzB,CAEA,QAASC,CAAAA,OAAT,CAAiBC,UAAjB,CAAkC,CAC9B,+FAAO,iBAAOC,QAAP,4JACHA,QAAQ,CAAC,CAAEC,IAAI,CAAEN,gBAAR,CAAD,CAAR,CADG,gBAGOO,EAHP,CAGYT,SAAS,CAAC,IAAD,CAHrB,CAIOU,KAJP,CAIeV,SAAS,CAAC,OAAD,CAJxB,uBAKoBD,CAAAA,KAAK,CAACY,GAAN,kBAAoBF,EAApB,cAAmCH,UAAnC,CAA+C,CAC9DM,OAAO,CAAE,CACL,eAAgB,kBADX,CAELC,aAAa,kBAAYH,KAAZ,CAFR,CADqD,CAA/C,CALpB,QAKOI,IALP,eAWCP,QAAQ,CAAC,CACLC,IAAI,CAAEL,gBADD,CAELY,OAAO,CAAE,CACLC,OAAO,CAAE,6BADJ,CAELF,IAAI,CAAEA,IAAI,CAACA,IAFN,CAGLG,MAAM,CAAEH,IAAI,CAACG,MAHR,CAFJ,CAAD,CAAR,CAQMC,MAnBP,CAmBgBjB,WAAW,CAACkB,WAAZ,CAAwB,6BAAxB,CAAuD,SAAvD,CAnBhB,CAoBCZ,QAAQ,CAACW,MAAD,CAAR,CApBD,iFAsBCX,QAAQ,CAAC,CACLC,IAAI,CAAEJ,gBADD,CAELW,OAAO,CAAE,CACLC,OAAO,CAAE,gBADJ,CAELI,KAAK,CAAE,YAAIC,QAAJ,CAAaJ,MAFf,CAFJ,CAAD,CAAR,CAOA,GAAI,YAAII,QAAJ,CAAaJ,MAAb,GAAwB,GAA5B,CAAiC,CACvBC,OADuB,CACdjB,WAAW,CAACkB,WAAZ,CAAwB,wBAAxB,CAAkD,OAAlD,CADc,CAE7BZ,QAAQ,CAACW,OAAD,CAAR,CACH,CAHD,IAIK,CAEKA,QAFL,CAEcjB,WAAW,CAACkB,WAAZ,4MAA4D,YAAIE,QAAJ,CAAaJ,MAAzE,EAAmF,OAAnF,CAFd,CAGDV,QAAQ,CAACW,QAAD,CAAR,CAEH,CAtCF,qEAAP,+DA2CH,CAED,OACIhB,gBADJ,CAEIC,gBAFJ,CAGIC,gBAHJ,CAIIC,OAJJ","sourcesContent":["import axios from \"axios\";\nimport { getCookie } from 'cookie/cookie'\nimport * as infoactions from \"modules/infomation/actions\"\n\nconst LOAD_PUT_REQUEST = \"learning-portal/src/ui/LOAD_PUT_REQUEST\";\nconst LOAD_PUT_SUCCESS = \"learning-portal/src/ui/LOAD_PUT_SUCCESS\";\nconst LOAD_PUT_FAILURE = \"learning-portal/src/ui/LOAD_PUT_REQUEST\";\n\nfunction loadPUT(updateInfo: any) {\n    return async (dispatch: any) => {\n        dispatch({ type: LOAD_PUT_REQUEST });\n        try {\n            const id = getCookie('id')\n            const token = getCookie('token')\n            const data = await axios.put(`/Users/${id}/Password`, updateInfo, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n            dispatch({\n                type: LOAD_PUT_SUCCESS,\n                payload: {\n                    message: \"แก้ไขรหัสผ่านเรียบร้อยเเล้ว\",\n                    data: data.data,\n                    status: data.status\n                },\n            });\n            const action = infoactions.loadMessage(\"แก้ไขรหัสผ่านเรียบร้อยเเล้ว\", \"success\")\n            dispatch(action)\n        } catch (err) {\n            dispatch({\n                type: LOAD_PUT_FAILURE,\n                payload: {\n                    message: \"เกิดข้อผิดพลาด\",\n                    staus: err.response.status\n                },\n            });\n            if (err.response.status === 401) {\n                const action = infoactions.loadMessage(\"รหัสผ่านเดิมไม่ถูกต้อง\", \"error\")\n                dispatch(action)\n            }\n            else {\n\n                const action = infoactions.loadMessage(`เกิดข้อผิดพลาดในการแก้ไขรหัสผ่าน ${err.response.status}`, \"error\")\n                dispatch(action)\n\n            }\n\n\n        }\n    };\n}\n\nexport {\n    LOAD_PUT_REQUEST,\n    LOAD_PUT_SUCCESS,\n    LOAD_PUT_FAILURE,\n    loadPUT,\n};\n"]},"metadata":{},"sourceType":"module"}
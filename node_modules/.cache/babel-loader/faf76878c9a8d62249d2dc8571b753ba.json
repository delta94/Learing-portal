{"ast":null,"code":"import _toConsumableArray from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ninew/Documents/GitHub/Learing-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import MaterialTable from\"material-table\";import{forwardRef}from\"react\";import{CssBaseline,Grid,Button}from\"@material-ui/core\";import AddBox from\"@material-ui/icons/AddBox\";import ArrowDownward from\"@material-ui/icons/ArrowDownward\";import Check from\"@material-ui/icons/Check\";import ChevronLeft from\"@material-ui/icons/ChevronLeft\";import ChevronRight from\"@material-ui/icons/ChevronRight\";import Clear from\"@material-ui/icons/Clear\";import DeleteOutline from\"@material-ui/icons/DeleteOutline\";import Edit from\"@material-ui/icons/Edit\";import FilterList from\"@material-ui/icons/FilterList\";import FirstPage from\"@material-ui/icons/FirstPage\";import LastPage from\"@material-ui/icons/LastPage\";import Remove from\"@material-ui/icons/Remove\";import SaveAlt from\"@material-ui/icons/SaveAlt\";import Search from\"@material-ui/icons/Search\";import ViewColumn from\"@material-ui/icons/ViewColumn\";import DialogAdd from\"./DialogAdd\";import{getCookie}from'cookie/cookie';import axios from\"axios\";import RefreshIcon from'@material-ui/icons/Refresh';import SeacrchCourse from\"./SearhCurriculum\";import DialogEdit from\"./DialogEdit\";import{useSelector}from'react-redux';import Snackbar from\"shared/SnackBar/SnackBar\";export default function MaterialTableDemo(props){var tableIcons={Add:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(AddBox,Object.assign({},props,{ref:ref}));}),Check:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Check,Object.assign({},props,{ref:ref}));}),Clear:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Delete:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(DeleteOutline,Object.assign({},props,{ref:ref}));}),DetailPanel:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),Edit:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Edit,Object.assign({},props,{ref:ref}));}),Export:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(SaveAlt,Object.assign({},props,{ref:ref}));}),Filter:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FilterList,Object.assign({},props,{ref:ref}));}),FirstPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FirstPage,Object.assign({},props,{ref:ref}));}),LastPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(LastPage,Object.assign({},props,{ref:ref}));}),NextPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),PreviousPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronLeft,Object.assign({},props,{ref:ref}));}),ResetSearch:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Search:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Search,Object.assign({},props,{ref:ref}));}),SortArrow:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ArrowDownward,Object.assign({},props,{ref:ref}));}),ThirdStateCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Remove,Object.assign({},props,{ref:ref}));}),ViewColumn:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ViewColumn,Object.assign({},props,{ref:ref}));})};var useState=React.useState;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openEdit=_useState4[0],setOpenEdit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),editData=_useState6[0],setEditData=_useState6[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),value=_useState8[0],setValue=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),entries=_useState10[0],setEntries=_useState10[1];var token=getCookie('token');var headers={Authorization:\"Bearer \".concat(token)};var platformid=getCookie('platformid');var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(value!==undefined)){_context.next=5;break;}_context.next=3;return axios.get(\"/Platforms/\".concat(platformid,\"/Curriculums/\").concat(value,\"/Courses\"));case 3:response=_context.sent;setEntries(response.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(){return _ref.apply(this,arguments);};}();var _useSelector=useSelector(function(state){return state.admin;}),message=_useSelector.message,severity=_useSelector.severity;var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),number=_useState12[0],setNumber=_useState12[1];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CssBaseline,null),message!==null&&/*#__PURE__*/React.createElement(Snackbar,{message:message,open:message!==null?true:false,severity:severity}),/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",justify:\"flex-start\",alignItems:\"center\",style:{margin:20}},/*#__PURE__*/React.createElement(SeacrchCourse,{setValue:setValue}),/*#__PURE__*/React.createElement(Button,{onClick:onSubmit},\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\\u0E2A\\u0E39\\u0E15\\u0E23\")),/*#__PURE__*/React.createElement(MaterialTable,{title:\"\\u0E23\\u0E32\\u0E22\\u0E27\\u0E34\\u0E0A\\u0E32\\u0E43\\u0E19\\u0E2B\\u0E25\\u0E31\\u0E01\\u0E2A\\u0E39\\u0E15\\u0E23\",columns:[{title:\"รหัสวิชา\",field:\"code\",type:\"numeric\"},{title:\"ชื่อวิชา\",field:\"name\"}],data:entries,icons:tableIcons,options:{pageSize:20,pageSizeOptions:[20,50,100]},actions:[{icon:function icon(){return/*#__PURE__*/React.createElement(RefreshIcon,null);},tooltip:\"รีเฟลส\",isFreeAction:true,onClick:onSubmit},{icon:function icon(){return/*#__PURE__*/React.createElement(AddBox,null);},tooltip:\"เพิ่ม\",isFreeAction:true,onClick:handleClickOpen},{icon:function icon(){return/*#__PURE__*/React.createElement(Edit,null);},tooltip:\"แก้ไข\",onClick:function onClick(event,rowData){setOpenEdit(true);var save=rowData;setNumber(rowData.tableData.id+1);setEditData(save);}}],editable:{onRowDelete:function onRowDelete(oldData){return new Promise(function(resolve){setTimeout(function(){//@ts-ignore\nresolve();var data=_toConsumableArray(entries);data.splice(data.indexOf(oldData),1);axios.delete(\"/Platforms/\".concat(platformid,\"/Curriculums/\").concat(value,\"/Courses/\").concat(oldData.id),{headers:headers}).then(function(res){return console.log(res.data);});setEntries(data);},600);});}}}),/*#__PURE__*/React.createElement(DialogEdit,{open:openEdit,setOpen:setOpenEdit,data:editData,valueCurriculun:value,numberNo:number}),/*#__PURE__*/React.createElement(DialogAdd,{open:open,setOpen:setOpen,valueCurriculun:value}));}","map":{"version":3,"sources":["/Users/ninew/Documents/GitHub/Learing-portal/src/modules/adminPortal/components/TableSubCurriculum/index.tsx"],"names":["React","MaterialTable","forwardRef","CssBaseline","Grid","Button","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","DialogAdd","getCookie","axios","RefreshIcon","SeacrchCourse","DialogEdit","useSelector","Snackbar","MaterialTableDemo","props","tableIcons","Add","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","useState","open","setOpen","openEdit","setOpenEdit","editData","setEditData","handleClickOpen","value","setValue","entries","setEntries","token","headers","Authorization","platformid","onSubmit","undefined","get","response","data","state","admin","message","severity","number","setNumber","margin","title","field","type","pageSize","pageSizeOptions","icon","tooltip","isFreeAction","onClick","event","rowData","save","tableData","id","onRowDelete","oldData","Promise","resolve","setTimeout","splice","indexOf","delete","then","res","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport { forwardRef } from \"react\";\nimport { CssBaseline, Grid, Button } from \"@material-ui/core\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\nimport DialogAdd from \"./DialogAdd\";\nimport { getCookie } from 'cookie/cookie'\nimport axios from \"axios\"\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SeacrchCourse from \"./SearhCurriculum\";\nimport DialogEdit from \"./DialogEdit\";\nimport { useSelector } from 'react-redux'\nimport Snackbar from \"shared/SnackBar/SnackBar\"\n\n\nexport default function MaterialTableDemo(props: any) {\n  const tableIcons = {\n    Add: forwardRef<SVGSVGElement>((props, ref) => (\n      <AddBox {...props} ref={ref} />\n    )),\n    Check: forwardRef<SVGSVGElement>((props, ref) => (\n      <Check {...props} ref={ref} />\n    )),\n    Clear: forwardRef<SVGSVGElement>((props, ref) => (\n      <Clear {...props} ref={ref} />\n    )),\n    Delete: forwardRef<SVGSVGElement>((props, ref) => (\n      <DeleteOutline {...props} ref={ref} />\n    )),\n    DetailPanel: forwardRef<SVGSVGElement>((props, ref) => (\n      <ChevronRight {...props} ref={ref} />\n    )),\n    Edit: forwardRef<SVGSVGElement>((props, ref) => (\n      <Edit {...props} ref={ref} />\n    )),\n    Export: forwardRef<SVGSVGElement>((props, ref) => (\n      <SaveAlt {...props} ref={ref} />\n    )),\n    Filter: forwardRef<SVGSVGElement>((props, ref) => (\n      <FilterList {...props} ref={ref} />\n    )),\n    FirstPage: forwardRef<SVGSVGElement>((props, ref) => (\n      <FirstPage {...props} ref={ref} />\n    )),\n    LastPage: forwardRef<SVGSVGElement>((props, ref) => (\n      <LastPage {...props} ref={ref} />\n    )),\n    NextPage: forwardRef<SVGSVGElement>((props, ref) => (\n      <ChevronRight {...props} ref={ref} />\n    )),\n    PreviousPage: forwardRef<SVGSVGElement>((props, ref) => (\n      <ChevronLeft {...props} ref={ref} />\n    )),\n    ResetSearch: forwardRef<SVGSVGElement>((props, ref) => (\n      <Clear {...props} ref={ref} />\n    )),\n    Search: forwardRef<SVGSVGElement>((props, ref) => (\n      <Search {...props} ref={ref} />\n    )),\n    SortArrow: forwardRef<SVGSVGElement>((props, ref) => (\n      <ArrowDownward {...props} ref={ref} />\n    )),\n    ThirdStateCheck: forwardRef<SVGSVGElement>((props, ref) => (\n      <Remove {...props} ref={ref} />\n    )),\n    ViewColumn: forwardRef<SVGSVGElement>((props, ref) => (\n      <ViewColumn {...props} ref={ref} />\n    )),\n  };\n  const { useState } = React;\n\n\n  const [open, setOpen] = useState(false);\n  const [openEdit, setOpenEdit] = useState(false);\n  const [editData, setEditData] = useState<any>([])\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const [value, setValue] = useState()\n  const [entries, setEntries] = useState<any>([])\n  const token = getCookie('token');\n\n\n  const headers = {\n    Authorization: `Bearer ${token}`,\n  }\n  const platformid = getCookie('platformid');\n  const onSubmit = async () => {\n    if (value !== undefined) {\n      const response = await axios.get(`/Platforms/${platformid}/Curriculums/${value}/Courses`)\n      setEntries(response.data)\n\n    }\n\n\n  }\n\n  const { message, severity } = useSelector((state: any) => state.admin);\n  const [number, setNumber] = useState(0)\n\n  return (\n    <div>\n      <CssBaseline />\n      {\n        message !== null && <Snackbar\n          message={message\n          }\n          open={message !== null ? true : false}\n          severity={severity}\n        />\n      }\n      <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"center\" style={{ margin: 20 }} >\n        <SeacrchCourse setValue={setValue} />\n        <Button onClick={onSubmit} >ค้นหาหลักสูตร</Button>\n      </Grid>\n\n      <MaterialTable\n        title=\"รายวิชาในหลักสูตร\"\n        columns={[\n\n          { title: \"รหัสวิชา\", field: \"code\", type: \"numeric\" },\n          { title: \"ชื่อวิชา\", field: \"name\" },\n        ]}\n        data={entries}\n        icons={tableIcons}\n        options={{\n          pageSize: 20,\n          pageSizeOptions: [20, 50, 100]\n        }}\n        actions={[\n          {\n            icon: () => <RefreshIcon />,\n            tooltip: \"รีเฟลส\",\n            isFreeAction: true,\n            onClick: onSubmit,\n          },\n          {\n            icon: () => <AddBox />,\n            tooltip: \"เพิ่ม\",\n            isFreeAction: true,\n            onClick: handleClickOpen,\n          },\n          {\n            icon: () => <Edit />,\n            tooltip: \"แก้ไข\",\n            onClick: (event, rowData) => {\n              setOpenEdit(true)\n              const save = rowData\n              setNumber(rowData.tableData.id + 1)\n\n              setEditData(save)\n\n\n\n            },\n          }\n        ]}\n        editable={{\n          onRowDelete: (oldData: any) =>\n            new Promise((resolve) => {\n              setTimeout(() => {\n                //@ts-ignore\n                resolve()\n                const data = [...entries]\n                data.splice(data.indexOf(oldData), 1)\n                axios\n                  .delete(`/Platforms/${platformid}/Curriculums/${value}/Courses/${oldData.id}`, { headers })\n                  .then((res) => console.log(res.data))\n                setEntries(data)\n              }, 600)\n            }),\n\n        }}\n      />\n      <DialogEdit open={openEdit} setOpen={setOpenEdit} data={editData} valueCurriculun={value} numberNo={number} />\n      <DialogAdd open={open} setOpen={setOpen} valueCurriculun={value} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}